{
    "$datacontext": {
        "in": "$.",
        "datavalues": {
            "Command1": {
                "$if $isnull {$ioiaccountstatus}.Commands.buttonTest": {
                    "$then": "Push the button!",
                    "$else": "$formatstring You pushed the button {{$ioiaccountstatus}.Commands.buttonTest.Count, .f} times!"
                }
            },
            "Command2": {
                "$if $isnull {$ioiaccountstatus}.Commands.modalTest": {
                    "$then": "Push the button (on the modal)!",
                    "$else": "$formatstring You pushed the button (on the modal) {{$ioiaccountstatus}.Commands.modalTest.Count, .f} times!"
                }
            },
            "Command3": {
                "$if $isnull {$ioiaccountstatus}.Commands.forEachTest": {
                    "$then": "[]",
                    "$else": "{{$ioiaccountstatus}.Commands}.forEachTest"
                }
            }
        },
        "do": {
            "view": "menu3.basic.ListElementSmall",
            "controller": "tabsitem",
            "data": {
                "title": "Test",
                "icon": "game"
            },
            "children": [
                {
                    "view": "menu3.containers.ScrollingListContainer",
                    "controller": "tabs",
                    "direction": "vertical",
                    "data": {
                        "direction": "vertical",
                        "overflowscrolling": "1.0"
                    },
                    "col": 2.25,
                    "nrows": 3.75,
                    "ncols": 4,
                    "children": {
                        "$mergearrays": [
                            {
                                "view": "menu3.basic.OptionsListElement",
                                "controller": "tabsitem",
                                "data": {
                                    "title": "Button"
                                },
                                "actions": {
                                    "$mergeobjects": [
                                        {
                                            "$include": {
                                                "$path": "$formatstring menusystem/plugins/peacock-menu/test/description.json@{$.@global.CacheBuster}"
                                            }
                                        },
                                        {
                                            "accept": {
                                                "ioiaccount": {
                                                    "mode": "submit-email",
                                                    "email": "peacock:buttonTest?test=test"
                                                }
                                            }
                                        }
                                    ]
                                }
                            },
                            {
                                "view": "menu3.basic.OptionsListElement",
                                "controller": "tabsitem",
                                "data": {
                                    "title": "Button with Modal"
                                },
                                "actions": {
                                    "$mergeobjects": [
                                        {
                                            "$include": {
                                                "$path": "$formatstring menusystem/plugins/peacock-menu/test/description.json@{$.@global.CacheBuster}"
                                            }
                                        },
                                        {
                                            "accept": {
                                                "show-modal": {
                                                    "config": {
                                                        "view": "menu3.modal.ModalDialogGeneric",
                                                        "buttons": [
                                                            {
                                                                "label": "Yes",
                                                                "type": "ok"
                                                            },
                                                            {
                                                                "label": "No",
                                                                "type": "cancel"
                                                            }
                                                        ],
                                                        "data": {
                                                            "title": "Modal Title",
                                                            "description": "Modal Body",
                                                            "typeoverride": "online"
                                                        }
                                                    },
                                                    "onbutton": [
                                                        {
                                                            "ioiaccount": {
                                                                "mode": "submit-email",
                                                                "email": "peacock:modalTest?test=test"
                                                            }
                                                        }
                                                    ]
                                                }
                                            }
                                        }
                                    ]
                                }
                            },
                            {
                                "view": "menu3.basic.OptionsListElement",
                                "controller": "tabsitem",
                                "data": {
                                    "title": "Batch"
                                },
                                "actions": {
                                    "$mergeobjects": [
                                        {
                                            "$include": {
                                                "$path": "$formatstring menusystem/plugins/peacock-menu/test/description.json@{$.@global.CacheBuster}"
                                            }
                                        },
                                        {
                                            "accept": {
                                                "ioiaccount": {
                                                    "mode": "submit-email",
                                                    "email": "peacock:buttonTest?test=test|modalTest?test=test"
                                                }
                                            }
                                        }
                                    ]
                                }
                            },
                            {
                                "view": "menu3.basic.OptionsListElement",
                                "controller": "tabsitem",
                                "data": {
                                    "title": "Clear"
                                },
                                "actions": {
                                    "$mergeobjects": [
                                        {
                                            "$include": {
                                                "$path": "$formatstring menusystem/plugins/peacock-menu/test/description.json@{$.@global.CacheBuster}"
                                            }
                                        },
                                        {
                                            "accept": {
                                                "ioiaccount": {
                                                    "mode": "submit-email",
                                                    "email": "peacock:clear?commands=buttonTest,modalTest"
                                                }
                                            }
                                        }
                                    ]
                                }
                            },
                            {
                                "$mergeobjects": [
                                    {
                                        "view": "menu3.basic.OptionsListElement",
                                        "controller": "tabsitem"
                                    },
                                    {
                                        "$if $eq($arraysize $.Command3, 0)": {
                                            "$then": {
                                                "data": {
                                                    "title": "Load Dynamic Cards"
                                                },
                                                "actions": {
                                                    "accept": {
                                                        "ioiaccount": {
                                                            "mode": "submit-email",
                                                            "email": "peacock:forEachTest"
                                                        }
                                                    }
                                                }
                                            },
                                            "$else": {
                                                "data": {
                                                    "title": "Clear Dynamic Cards"
                                                },
                                                "actions": {
                                                    "accept": {
                                                        "ioiaccount": {
                                                            "mode": "submit-email",
                                                            "email": "peacock:clear?commands=forEachTest"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                ]
                            },
                            {
                                "$each $.Command3": {
                                    "view": "menu3.basic.MenuTileSmall",
                                    "controller": "tabsitem",
                                    "data": {
                                        "header": "$formatstring {$.Title}",
                                        "icon": "weapon",
                                        "title": "$formatstring {$.Body}",
                                        "image": "$res images/opportunities/wet/wet_opp_thecontroller.jpg"
                                    }
                                }
                            }
                        ]
                    }
                }
            ]
        }
    }
}
